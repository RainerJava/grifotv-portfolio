(function(){var D,u,H,ah,l,f,ae,r,P,Y,A,C,I,L,o,ab,b,Z,Q,a,t,j,n,z,h,T,x,ak,X,g,v,M,O,E,K,ac,W,V,q,N,ag,e,G,aa,ad,p,J,d,k,S,c,aj,U,af,y,w,R,F,ai,B,al,m=function(am,an){return function(){return am.apply(an,arguments)}},s=function(ap,an){for(var am in an){if(i.call(an,am)){ap[am]=an[am]}}function ao(){this.constructor=ap}ao.prototype=an.prototype;ap.prototype=new ao();ap.__super__=an.prototype;return ap},i={}.hasOwnProperty;$(function(){window.grifo={state:null,config:null,service:null,view:null,router:null,labelCollection:null,brandCollection:null,profileCollection:null,experienceCollection:null,experienceGroupCollection:null,tagGroupCollection:null,tagCollection:null,creditGroupCollection:null,creditCollection:null,projectCollection:null,youtubeCollection:null,twitterCollection:null,githubCollection:null,flickrCollection:null,blogCollection:null,loaded:0,numLoaded:2,onLoaded:null};grifo.state=new ae();grifo.config=new ah();grifo.service=new f();grifo.view=new r();grifo.onLoaded=function(){grifo.loaded++;if(grifo.loaded<grifo.numLoaded){return}grifo.view.start();grifo.router=new l();grifo.router.on(l.EVENT_HASH_CHANGED,grifo.view.onHashChanged);return grifo.router.start()};grifo.service.on(f.EVENT_LOADED,grifo.onLoaded);grifo.view.on(r.EVENT_LOADED,grifo.onLoaded);return grifo.service.start()});if(!window.console){window.console={log:function(am){return am},dir:function(am){return am}}}ae=(function(){am.prototype.isTablet=/ipad|android 3|sch-i800|playbook|tablet|kindle|gt-p1000|sgh-t849|shw-m180s|a510|a511|a100|dell streak|silk/i.test(navigator.userAgent.toLowerCase());am.prototype.isMobile=/iphone|ipod|android|blackberry|opera mini|opera mobi|skyfire|maemo|windows phone|palm|iemobile|symbian|symbianos|fennec/i.test(navigator.userAgent.toLowerCase());am.prototype.isDesktop=false;am.prototype.currentPage=null;am.prototype.currentSubPage=null;am.prototype.currentSubSubPage=null;am.prototype.previousPage=null;am.prototype.previousSubPage=null;am.prototype.previousSubSubPage=null;function am(){var an,ao,ap;this.isDesktop=!this.isTablet&&!this.isMobile;an=$("html");if(this.isMobile){an.addClass("mobile")}if(this.isDesktop){an.addClass("desktop")}if(this.isTablet){an.addClass("tablet")}if(/MSIE/.test(navigator.userAgent)){an.addClass("ie")}ap=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");if(ap.exec(navigator.userAgent)){ao=parseFloat(RegExp.$1);an.addClass("ie-"+ao);if(ao<=8){an.addClass("old-ie")}else{an.addClass("new-ie")}}else{an.addClass("non-ie")}}return am})();ah=(function(){am.prototype.PAGE_PROJECTS="projects";am.prototype.PAGE_TAGS="tags";am.prototype.PAGE_STREAM="stream";am.prototype.PAGE_ABOUT="about";am.prototype.PAGE_DEFAULT=null;am.prototype.URL_GDOCS_SS="http://spreadsheets.google.com/feeds/list/{KEY}/{WORKSHEET}/public/values?alt=json-in-script&callback=?";am.prototype.KEY_GDOCS_SS="0AuMegPFV2btJdGFIMWE1V0VvOUFuUlVpWXp3UXlwQ1E";am.prototype.WORKSHEET_LABELS="od9";am.prototype.WORKSHEET_BRANDS="od6";am.prototype.WORKSHEET_PROFILES="od7";am.prototype.WORKSHEET_EXPERIENCES="od8";am.prototype.WORKSHEET_EXPERIENCE_GROUPS="odb";am.prototype.WORKSHEET_TAGS="od4";am.prototype.WORKSHEET_TAG_GROUPS="od5";am.prototype.WORKSHEET_CREDITS="ocx";am.prototype.WORKSHEET_CREDIT_GROUPS="ocw";am.prototype.WORKSHEET_PROJECTS="ocz";am.prototype.URL_LABELS=null;am.prototype.URL_BRANDS=null;am.prototype.URL_PROFILES=null;am.prototype.URL_EXPERIENCES=null;am.prototype.URL_EXPERIENCE_GROUPS=null;am.prototype.URL_TAGS=null;am.prototype.URL_TAG_GROUPS=null;am.prototype.URL_CREDITS=null;am.prototype.URL_CREDIT_GROUPS=null;am.prototype.URL_PROJECTS=null;am.prototype.URL_YOUTUBE="http://gdata.youtube.com/feeds/api/videos?alt=json-in-script&author={USER_ID}&orderby=published&start-index=1&max-results={MAX_RESULTS}&callback=?";am.prototype.URL_TWITTER="https://api.twitter.com/1/statuses/user_timeline.json?include_entities=false&include_rts=false&exclude_replies=true&trim_user=false&contributor_details=false&screen_name={USER_ID}&count={MAX_RESULTS}&callback=?";am.prototype.URL_GITHUB="https://github.com/{USER_ID}.json?&callback=?";am.prototype.URL_FLICKR="http://api.flickr.com/services/feeds/photos_public.gne?id={USER_ID}&lang=en-us&format=json&callback=?";am.prototype.URL_BLOG="xml-proxy.php?url=http://blog.grifo.tv/feed/";am.prototype.USER_ID_YOUTUBE="grifotvmobile";am.prototype.USER_ID_TWITTER="grifotv";am.prototype.USER_ID_GITHUB="grifotv";am.prototype.USER_ID_FLICKR="41688283@N07";am.prototype.MAX_RESULTS_YOUTUBE=10;am.prototype.MAX_RESULTS_TWITTER=12;am.prototype.MAX_RESULTS_GITHUB=12;am.prototype.MAX_RESULTS_FLICKR=10;am.prototype.MAX_RESULTS_BLOG=6;am.prototype.SHARE_URL_FACEBOOK="http://www.facebook.com/sharer.php?u={URL}";am.prototype.SHARE_URL_TWITTER="http://twitter.com/home?status={TEXT}";am.prototype.SNAP_Y_HEADER=120;am.prototype.SNAP_Y_HEADER_BG=155;function am(){this.PAGE_DEFAULT=this.PAGE_PROJECTS;this.URL_GDOCS_SS=this.URL_GDOCS_SS.replace("{KEY}",this.KEY_GDOCS_SS);this.URL_LABELS=this.URL_GDOCS_SS.replace("{WORKSHEET}",this.WORKSHEET_LABELS);this.URL_BRANDS=this.URL_GDOCS_SS.replace("{WORKSHEET}",this.WORKSHEET_BRANDS);this.URL_PROFILES=this.URL_GDOCS_SS.replace("{WORKSHEET}",this.WORKSHEET_PROFILES);this.URL_EXPERIENCES=this.URL_GDOCS_SS.replace("{WORKSHEET}",this.WORKSHEET_EXPERIENCES);this.URL_EXPERIENCE_GROUPS=this.URL_GDOCS_SS.replace("{WORKSHEET}",this.WORKSHEET_EXPERIENCE_GROUPS);this.URL_TAGS=this.URL_GDOCS_SS.replace("{WORKSHEET}",this.WORKSHEET_TAGS);this.URL_TAG_GROUPS=this.URL_GDOCS_SS.replace("{WORKSHEET}",this.WORKSHEET_TAG_GROUPS);this.URL_CREDITS=this.URL_GDOCS_SS.replace("{WORKSHEET}",this.WORKSHEET_CREDITS);this.URL_CREDIT_GROUPS=this.URL_GDOCS_SS.replace("{WORKSHEET}",this.WORKSHEET_CREDIT_GROUPS);this.URL_PROJECTS=this.URL_GDOCS_SS.replace("{WORKSHEET}",this.WORKSHEET_PROJECTS);this.URL_YOUTUBE=this.URL_YOUTUBE.replace("{USER_ID}",this.USER_ID_YOUTUBE);this.URL_TWITTER=this.URL_TWITTER.replace("{USER_ID}",this.USER_ID_TWITTER);this.URL_GITHUB=this.URL_GITHUB.replace("{USER_ID}",this.USER_ID_GITHUB);this.URL_FLICKR=this.URL_FLICKR.replace("{USER_ID}",this.USER_ID_FLICKR);this.URL_YOUTUBE=this.URL_YOUTUBE.replace("{MAX_RESULTS}",this.MAX_RESULTS_YOUTUBE);this.URL_TWITTER=this.URL_TWITTER.replace("{MAX_RESULTS}",this.MAX_RESULTS_TWITTER*2)}return am})();f=(function(){am.EVENT_LOADED="EVENT_LOADED";am.prototype.loaded=0;am.prototype.numLoaded=11;function am(){this.onLoad=m(this.onLoad,this);_.extend(this,Backbone.Events)}am.prototype.start=function(){grifo.projectCollection=new N;grifo.projectCollection.url=grifo.config.URL_PROJECTS;grifo.projectCollection.fetch({success:(function(an){return function(ap,ao){return an.onLoad()}})(this),error:(function(an){return function(ap,ao){return an.onLoad()}})(this)});grifo.tagCollection=new p();grifo.tagCollection.url=grifo.config.URL_TAGS;grifo.tagCollection.fetch({success:(function(an){return function(ap,ao){return an.onLoad()}})(this),error:(function(an){return function(ap,ao){return an.onLoad()}})(this)});grifo.tagGroupCollection=new J();grifo.tagGroupCollection.url=grifo.config.URL_TAG_GROUPS;grifo.tagGroupCollection.fetch({success:(function(an){return function(ap,ao){return an.onLoad()}})(this),error:(function(an){return function(ap,ao){return an.onLoad()}})(this)});grifo.creditCollection=new o();grifo.creditCollection.url=grifo.config.URL_CREDITS;grifo.creditCollection.fetch({success:(function(an){return function(ap,ao){return an.onLoad()}})(this),error:(function(an){return function(ap,ao){return an.onLoad()}})(this)});grifo.creditGroupCollection=new ab();grifo.creditGroupCollection.url=grifo.config.URL_CREDIT_GROUPS;grifo.creditGroupCollection.fetch({success:(function(an){return function(ap,ao){return an.onLoad()}})(this),error:(function(an){return function(ap,ao){return an.onLoad()}})(this)});grifo.experienceCollection=new t();grifo.experienceCollection.url=grifo.config.URL_EXPERIENCES;grifo.experienceCollection.fetch({success:(function(an){return function(ap,ao){return an.onLoad()}})(this),error:(function(an){return function(ap,ao){return an.onLoad()}})(this)});grifo.experienceGroupCollection=new j();grifo.experienceGroupCollection.url=grifo.config.URL_EXPERIENCE_GROUPS;grifo.experienceGroupCollection.fetch({success:(function(an){return function(ap,ao){return an.onLoad()}})(this),error:(function(an){return function(ap,ao){return an.onLoad()}})(this)});grifo.profileCollection=new W();grifo.profileCollection.url=grifo.config.URL_PROFILES;grifo.profileCollection.fetch({success:(function(an){return function(ap,ao){return an.onLoad()}})(this),error:(function(an){return function(ap,ao){return an.onLoad()}})(this)});grifo.brandCollection=new C();grifo.brandCollection.url=grifo.config.URL_BRANDS;grifo.brandCollection.fetch({success:(function(an){return function(ap,ao){return an.onLoad()}})(this),error:(function(an){return function(ap,ao){return an.onLoad()}})(this)});grifo.labelCollection=new E();grifo.labelCollection.url=grifo.config.URL_LABELS;grifo.labelCollection.fetch({success:(function(an){return function(ap,ao){return an.onLoad()}})(this),error:(function(an){return function(ap,ao){return an.onLoad()}})(this)});grifo.youtubeCollection=new ai();grifo.youtubeCollection.url=grifo.config.URL_YOUTUBE;grifo.youtubeCollection.fetch({success:(function(an){return function(ap,ao){return an.onLoad()}})(this),error:(function(an){return function(ap,ao){return an.onLoad()}})(this)});grifo.twitterCollection=new af();grifo.twitterCollection.url=grifo.config.URL_TWITTER;grifo.twitterCollection.fetch({success:(function(an){return function(ap,ao){return an.onLoad()}})(this),error:(function(an){return function(ap,ao){return an.onLoad()}})(this)});grifo.githubCollection=new X();grifo.githubCollection.url=grifo.config.URL_GITHUB;grifo.githubCollection.fetch({success:(function(an){return function(ap,ao){return an.onLoad()}})(this),error:(function(an){return function(ap,ao){return an.onLoad()}})(this)});grifo.flickrCollection=new T();grifo.flickrCollection.url=grifo.config.URL_FLICKR;grifo.flickrCollection.fetch({success:(function(an){return function(ap,ao){return an.onLoad()}})(this),error:(function(an){return function(ap,ao){return an.onLoad()}})(this)});grifo.blogCollection=new P();grifo.blogCollection.url=grifo.config.URL_BLOG;return grifo.blogCollection.load()};am.prototype.onLoad=function(){this.loaded++;if(this.loaded===this.numLoaded){return this.trigger(am.EVENT_LOADED)}};return am})();R={relativeTime:function(ap){var aA,az,ay,ar,an,av,ax,au,aq,am,aw,ao,at;au=60*1000;ax=au*60;av=ax*24;aq=av*30;am=av*365;aw=Date.parse(ap);ao=new Date();az=ao.getTime()-aw;if(az<au){return"less than a minute ago"}else{if(az<ax){ar=Math.round(az/au);if(ar>1){return ar+" minutes ago"}else{return"about a minute ago"}}else{if(az<av){ay=Math.round(az/ax);if(ay>1){return ay+" hours ago"}else{return"about an hour ago"}}else{if(az<aq){aA=Math.round(az/av);if(aA>1){return aA+" days ago"}else{return"1 day ago"}}else{if(az<am){an=Math.round(az/aq);if(an>1){return an+" months ago"}else{return"1 month ago"}}else{at=Math.round(az/am);if(at>1){return at+" years ago"}else{return"1 year ago"}}}}}}},linkifyUrls:function(am){var an;an=/((ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?)/gi;return am.replace(an,'<a target="_blank" href="$1">$1</a>')},linkifyUsers:function(am){var an;an=/[\@]+([A-Za-z0-9-_]+)/gi;return am.replace(an,'<a target="_blank" href="http://twitter.com/$1">@$1</a>')},linkifyHashes:function(am){var an;an=/[\#]+([A-Za-z0-9-_]+)/gi;return am.replace(an,' <a target="_blank" href="https://twitter.com/search?q=%23$1">#$1</a> ')},getWidth:function(am){var an;an=/(width=")+([0-9-_]+")/gi;am=am.match(an).toString();am=am.replace("width=","");am=am.replace('"',"").replace('"',"");return parseInt(am)},getHeight:function(am){var an;an=/(height=")+([0-9-_]+")/gi;am=am.match(an).toString();am=am.replace("height=","");am=am.replace('"',"").replace('"',"");return parseInt(am)}};l=(function(am){s(an,am);function an(){return an.__super__.constructor.apply(this,arguments)}an.EVENT_HASH_CHANGED="EVENT_HASH_CHANGED";an.prototype.currentPage="";an.prototype.routes={":id":"hashChanged","/:id":"hashChanged",":id/":"hashChanged","/:id/":"hashChanged",":id/:subid":"hashChanged","/:id/:subid":"hashChanged",":id/:subid/":"hashChanged","/:id/:subid/":"hashChanged",":id/:subid/:subsubid":"hashChanged","/:id/:subid/:subsubid":"hashChanged",":id/:subid/:subsubid/":"hashChanged","/:id/:subid/:subsubid/":"hashChanged",":id/:subid/:subsubid/*actions":"hashChanged","/:id/:subid/:subsubid/*actions":"hashChanged","*actions":"default"};an.prototype.start=function(){return Backbone.history.start()};an.prototype.hashChanged=function(ap,at,ar,ao){var aq;if(ap==null){ap=null}if(at==null){at=null}if(ar==null){ar=null}if(ao==null){ao=null}if(ap===grifo.config.PAGE_PROJECTS||ap===grifo.config.PAGE_TAGS||ap===grifo.config.PAGE_STREAM||ap===grifo.config.PAGE_ABOUT){aq="/";if(ap){aq+=ap;aq+="/";if(at){aq+=at;aq+="/";if(ar){aq+=ar;aq+="/"}}}if(aq!==this.currentPage){this.currentPage=aq;_gaq.push(["_trackPageview",this.currentPage]);return this.trigger(an.EVENT_HASH_CHANGED,ap,at,ar)}}};an.prototype["default"]=function(ao){return this.hashChanged(grifo.config.PAGE_DEFAULT)};an.prototype.navigateToProject=function(ao){var ap;if(ao==null){ao=null}ap="//"+grifo.config.PAGE_PROJECTS+"/";if(ao){ap+=ao+"/"}return this.navigate(ap,{trigger:true})};an.prototype.navigateToTag=function(ao){var ap;if(ao==null){ao=null}ap="//"+grifo.config.PAGE_TAGS+"/";if(ao){ap+=ao+"/"}return this.navigate(ap,{trigger:true})};return an})(Backbone.Router);I=(function(am){s(an,am);function an(){return an.__super__.constructor.apply(this,arguments)}an.prototype.defaults={id:"",label:"",image:"",url:"",window:"",priority:0};an.prototype.initialize=function(){if(this.get("url").length>0){if(this.get("url").indexOf("#")===0){this.set({window:"_self"})}else{this.set({window:"_blank"})}}return this.set({priority:parseFloat(this.get("priority"))})};return an})(Backbone.Model);b=(function(an){s(am,an);function am(){return am.__super__.constructor.apply(this,arguments)}am.prototype.defaults={id:"",label:"",project:""};return am})(Backbone.Model);Q=(function(an){s(am,an);function am(){return am.__super__.constructor.apply(this,arguments)}am.prototype.defaults={label:"",profiles:[],group:""};return am})(Backbone.Model);n=(function(an){s(am,an);function am(){return am.__super__.constructor.apply(this,arguments)}am.prototype.defaults={id:"",label:"",column:0};return am})(Backbone.Model);h=(function(an){s(am,an);function am(){return am.__super__.constructor.apply(this,arguments)}am.prototype.defaults={left:"",right:"",plus_url:"",window:"",group:""};am.prototype.initialize=function(){if(this.get("plus_url").length>0){if(this.get("plus_url").indexOf("#")===0){return this.set({window:"_self"})}else{return this.set({window:"_blank"})}}};return am})(Backbone.Model);K=(function(an){s(am,an);function am(){return am.__super__.constructor.apply(this,arguments)}am.prototype.defaults={id:"",label:""};return am})(Backbone.Model);V=(function(an){s(am,an);function am(){return am.__super__.constructor.apply(this,arguments)}am.prototype.defaults={id:"",label:"",url:"",window:""};am.prototype.initialize=function(){if(this.get("url").length>0){if(this.get("url").indexOf("#")===0){return this.set({window:"_self"})}else{return this.set({window:"_blank"})}}};return am})(Backbone.Model);ag=(function(am){s(an,am);function an(){return an.__super__.constructor.apply(this,arguments)}an.prototype.defaults={id:"",index:0,tile_size:"small",short_title:"",long_title:"",headline:"",thumbnail:"",url:"",video:"",copy:"",images:[],tags:[],display_tags:[]};return an})(Backbone.Model);d=(function(an){s(am,an);function am(){return am.__super__.constructor.apply(this,arguments)}am.prototype.defaults={id:"",label:""};return am})(Backbone.Model);S=(function(am){s(an,am);function an(){return an.__super__.constructor.apply(this,arguments)}an.prototype.defaults={id:"",short_title:"",long_title:"",group:"",selected:false};return an})(Backbone.Model);Y=(function(an){s(am,an);function am(){return am.__super__.constructor.apply(this,arguments)}am.prototype.defaults={title:"",url:"",description:"",date:""};return am})(Backbone.Model);x=(function(an){s(am,an);function am(){return am.__super__.constructor.apply(this,arguments)}am.prototype.defaults={title:"",url:"",image:"",date:"",is_portrait:false};return am})(Backbone.Model);g=(function(am){s(an,am);function an(){return an.__super__.constructor.apply(this,arguments)}an.prototype.defaults={type:"",text:"",date:"",url:""};return an})(Backbone.Model);y=(function(am){s(an,am);function an(){return an.__super__.constructor.apply(this,arguments)}an.prototype.defaults={id:"",text:"",date:"",url:""};return an})(Backbone.Model);B=(function(an){s(am,an);function am(){return am.__super__.constructor.apply(this,arguments)}am.prototype.defaults={id:"",url:"",date:"",title:"",content:"",thumbnail_low:"",thumbnail_medium:"",is_portrait:false};return am})(Backbone.Model);C=(function(am){s(an,am);function an(){return an.__super__.constructor.apply(this,arguments)}an.prototype.model=I;an.prototype.comparator=function(ao){return ao.get("priority")*10+(Math.random()*10)};an.prototype.parse=function(at){var av,ar,ap,ao,aq,au;aq=[];au=at.feed["entry"];for(ap=0,ao=au.length;ap<ao;ap++){av=au[ap];ar=new I({id:av["gsx$id"]["$t"],label:av["gsx$label"]["$t"],image:av["gsx$image"]["$t"],url:av["gsx$url"]["$t"],priority:av["gsx$priority"]["$t"]});aq.push(ar)}return aq};return an})(Backbone.Collection);o=(function(an){s(am,an);function am(){return am.__super__.constructor.apply(this,arguments)}am.prototype.model=Q;am.prototype.parse=function(at){var av,ar,ap,ao,aq,au;aq=[];au=at.feed["entry"];for(ap=0,ao=au.length;ap<ao;ap++){av=au[ap];ar=new Q({label:av["gsx$label"]["$t"],profiles:av["gsx$profiles"]["$t"].split(","),group:av["gsx$group"]["$t"]});aq.push(ar)}return aq};return am})(Backbone.Collection);ab=(function(am){s(an,am);function an(){return an.__super__.constructor.apply(this,arguments)}an.prototype.model=b;an.prototype.parse=function(at){var av,ar,ap,ao,aq,au;aq=[];au=at.feed["entry"];for(ap=0,ao=au.length;ap<ao;ap++){av=au[ap];ar=new b({id:av["gsx$id"]["$t"],label:av["gsx$label"]["$t"],project:av["gsx$project"]["$t"]});aq.push(ar)}return aq};return an})(Backbone.Collection);t=(function(an){s(am,an);function am(){return am.__super__.constructor.apply(this,arguments)}am.prototype.model=h;am.prototype.parse=function(at){var av,ar,ap,ao,aq,au;aq=[];au=at.feed["entry"];for(ap=0,ao=au.length;ap<ao;ap++){av=au[ap];ar=new h({left:av["gsx$left"]["$t"],right:av["gsx$right"]["$t"],plus_url:av["gsx$plusurl"]["$t"],group:av["gsx$group"]["$t"]});aq.push(ar)}return aq};return am})(Backbone.Collection);j=(function(am){s(an,am);function an(){return an.__super__.constructor.apply(this,arguments)}an.prototype.model=n;an.prototype.parse=function(at){var av,ar,ap,ao,aq,au;aq=[];au=at.feed["entry"];for(ap=0,ao=au.length;ap<ao;ap++){av=au[ap];ar=new n({id:av["gsx$id"]["$t"],label:av["gsx$label"]["$t"],column:parseFloat(av["gsx$column"]["$t"])});aq.push(ar)}return aq};return an})(Backbone.Collection);E=(function(am){s(an,am);function an(){return an.__super__.constructor.apply(this,arguments)}an.prototype.model=K;an.prototype.parse=function(at){var av,ar,ap,ao,aq,au;aq=[];au=at.feed["entry"];for(ap=0,ao=au.length;ap<ao;ap++){av=au[ap];ar=new K({id:av["gsx$id"]["$t"],label:av["gsx$label"]["$t"]});aq.push(ar)}return aq};return an})(Backbone.Collection);W=(function(am){s(an,am);function an(){return an.__super__.constructor.apply(this,arguments)}an.prototype.model=V;an.prototype.parse=function(at){var av,ar,ap,ao,aq,au;aq=[];au=at.feed["entry"];for(ap=0,ao=au.length;ap<ao;ap++){av=au[ap];ar=new V({id:av["gsx$id"]["$t"],label:av["gsx$label"]["$t"],url:av["gsx$url"]["$t"]});aq.push(ar)}return aq};return an})(Backbone.Collection);N=(function(am){s(an,am);function an(){return an.__super__.constructor.apply(this,arguments)}an.prototype.model=ag;an.prototype.parse=function(at){var av,ar,ap,ao,aq,au;aq=[];au=at.feed["entry"];for(ap=0,ao=au.length;ap<ao;ap++){av=au[ap];ar=new b({id:av["gsx$id"]["$t"],index:aq.length,tile_size:av["gsx$tilesize"]["$t"],short_title:av["gsx$shorttitle"]["$t"],long_title:av["gsx$longtitle"]["$t"],headline:av["gsx$headline"]["$t"],thumbnail:av["gsx$thumbnail"]["$t"],url:av["gsx$url"]["$t"],video:av["gsx$video"]["$t"],copy:av["gsx$copy"]["$t"],images:av["gsx$images"]["$t"].split(","),tags:av["gsx$tags"]["$t"].split(","),display_tags:av["gsx$displaytags"]["$t"].split(",")});aq.push(ar)}return aq};return an})(Backbone.Collection);p=(function(an){s(am,an);function am(){return am.__super__.constructor.apply(this,arguments)}am.prototype.model=S;am.prototype.parse=function(at){var av,ar,ap,ao,aq,au;aq=[];au=at.feed["entry"];for(ap=0,ao=au.length;ap<ao;ap++){av=au[ap];ar=new S({id:av["gsx$id"]["$t"],short_title:av["gsx$shorttitle"]["$t"],long_title:av["gsx$longtitle"]["$t"],group:av["gsx$group"]["$t"]});aq.push(ar)}return aq};am.prototype.select=function(aq){var ap,ao,au,ar,at;au=this.models;ar=[];for(ap=0,ao=au.length;ap<ao;ap++){at=au[ap];if(at.get("id")===aq){ar.push(at.set({selected:true}))}else{ar.push(at.set({selected:false}))}}return ar};return am})(Backbone.Collection);J=(function(am){s(an,am);function an(){return an.__super__.constructor.apply(this,arguments)}an.prototype.model=d;an.prototype.parse=function(at){var av,ar,ap,ao,aq,au;aq=[];au=at.feed["entry"];for(ap=0,ao=au.length;ap<ao;ap++){av=au[ap];ar=new d({id:av["gsx$id"]["$t"],label:av["gsx$label"]["$t"]});aq.push(ar)}return aq};return an})(Backbone.Collection);P=(function(an){s(am,an);function am(){this.parseAndAdd=m(this.parseAndAdd,this);return am.__super__.constructor.apply(this,arguments)}am.prototype.model=Y;am.prototype.load=function(){return $.get(this.url,this.parseAndAdd)};am.prototype.parseAndAdd=function(ao){return this.add(this.parse(ao))};am.prototype.parse=function(ap){var ao;ao=[];$(ap).find("item").each(function(){var at,av,ar,au,aq,aw;at=$(this);aq=at.find("title").text();aw=at.find("link").text();ar=at.find("description").text();av=R.relativeTime(at.find("pubDate").text());au=new Y({title:aq,url:aw,description:ar,date:av});ao.push(au);if(ao.length===grifo.config.MAX_RESULTS_BLOG){return ao}});return ao};return am})(Backbone.Collection);T=(function(an){s(am,an);function am(){return am.__super__.constructor.apply(this,arguments)}am.prototype.model=x;am.prototype.parse=function(ay){var au,ao,aB,at,ar,aC,aD,aq,av,aA,aw,az,ax,ap;ax=[];ap=ay.items;for(aw=0,az=ap.length;aw<az;aw++){at=ap[aw];au=false;aB=at.description;if(aB){aA=R.getWidth(aB);ar=R.getHeight(aB);if(ar>aA){au=true}}aq=at.title;av=at.link;aC=at.media["m"].replace("_m.jpg",".jpg");ao=R.relativeTime(at.published);aD=new x({title:aq,url:av,image:aC,date:ao,is_portrait:au});ax.push(aD);if(ax.length===grifo.config.MAX_RESULTS_FLICKR){return ax}}return ax};am.prototype.parseAndAdd=function(ao){return this.add(this.parse(ao))};return am})(Backbone.Collection);window.jsonFlickrFeed=function(am){grifo.flickrCollection.reset();return grifo.flickrCollection.parseAndAdd(am)};X=(function(am){s(an,am);function an(){return an.__super__.constructor.apply(this,arguments)}an.prototype.model=g;an.prototype.parse=function(au){var ao,ap,az,ax,ay,aw,aq,ar,av,at;at=[];for(ar=0,av=au.length;ar<av;ar++){ap=au[ar];ax=ap["public"];aw=ap.type;ao=R.relativeTime(ap.created_at);aq=ap.url;ay=null;switch(aw){case"PushEvent":if(ap.repository){if(!ap.repository["private"]){ay='pushed to <a target="_blank" href="'+aq+'">'+ap.repository["name"]+"</a>"}}break;case"WatchEvent":ay=ap.payload["action"]+' watching <a target="_blank" href="'+aq+'">'+ap.repository["name"]+"</a>";break;case"CreateEvent":if(ap.repository){if(!ap.repository["private"]){ay='created <a target="_blank" href="'+aq+'">'+ap.repository["name"]+"</a>"}}break;case"ForkEvent":if(ap.repository){if(!ap.repository["private"]){ay='forked <a target="_blank" href="'+aq+'">'+ap.repository["name"]+"</a>"}}break;case"FollowEvent":ay='started following <a target="_blank" href="'+aq+'">'+ap.payload["target"]["login"]+"</a>"}if(ay){az=new g({type:aw,text:ay,date:ao,url:aq});at.push(az);if(at.length===grifo.config.MAX_RESULTS_GITHUB){return at}}}return at};return an})(Backbone.Collection);af=(function(an){s(am,an);function am(){return am.__super__.constructor.apply(this,arguments)}am.prototype.model=y;am.prototype.parse=function(av){var az,ap,aq,ax,aA,ay,ao,ar,at,aw,au;au=[];for(at=0,aw=av.length;at<aw;at++){aq=av[at];ax=aq.id_str;ay=aq.text;if(aq.truncated&&aq.retweeted_status&&aq.retweeted_status["text"]){ao=aq.retweeted_status["text"];az=ay.indexOf(ao.substr(0,20));if(az!==-1){ay=ay.substr(0,az)+ao}}ay=R.linkifyUrls(ay);ay=R.linkifyUsers(ay);ay=R.linkifyHashes(ay);ap=R.relativeTime(aq.created_at);ar="https://twitter.com/";ar+=aq.user["screen_name"];ar+="/statuses/";ar+=aq.id_str;aA=new y({id:ax,text:ay,date:ap,url:ar});au.push(aA);if(au.length===grifo.config.MAX_RESULTS_TWITTER){return au}}return au};return am})(Backbone.Collection);ai=(function(an){s(am,an);function am(){return am.__super__.constructor.apply(this,arguments)}am.prototype.model=B;am.prototype.parse=function(av){var ay,ao,aw,aq,az,aB,aA,ar,at,ax,au,ap;au=[];ap=av.feed["entry"];for(at=0,ax=ap.length;at<ax;at++){aq=ap[at];ao=R.relativeTime(aq.published["$t"]);ar=aq.id["$t"];ar=ar.replace("http://gdata.youtube.com/feeds/api/videos/","http://www.youtube.com/watch?v=");az=ar.replace("http://www.youtube.com/watch?v=","");aA=aq["media$group"]["media$keywords"]["$t"];aw=aq["media$group"]["media$description"]["$t"];ay=false;if(this.isLandscape(aA)||this.isLandscape(aw)){ay=true}aB=new B({id:az,url:ar,date:ao,title:aq.title["$t"],content:aq.content["$t"],thumbnail_low:"http://i.ytimg.com/vi/"+az+"/default.jpg",thumbnail_medium:"http://i.ytimg.com/vi/"+az+"/hqdefault.jpg",is_portrait:!ay});au.push(aB)}return au};am.prototype.isLandscape=function(ao){if(ao){if(ao.toLowerCase().indexOf("horizontal")!==-1||ao.toLowerCase().indexOf("h")!==-1||ao.toLowerCase().indexOf("landscape")!==-1){return true}}return false};return am})(Backbone.Collection);r=(function(am){s(an,am);function an(){this.realign=m(this.realign,this);this.onHashChanged=m(this.onHashChanged,this);this.show=m(this.show,this);this.render=m(this.render,this);return an.__super__.constructor.apply(this,arguments)}an.EVENT_LOADED="EVENT_LOADED";an.EVENT_REALIGNED="EVENT_REALIGNED";an.prototype.el="body";an.prototype.$el=null;an.prototype.$window=null;an.prototype.template=null;an.prototype.headerView=null;an.prototype.headerBgView=null;an.prototype.tagsPageView=null;an.prototype.projectsPageView=null;an.prototype.projectPageView=null;an.prototype.streamPageView=null;an.prototype.aboutPageView=null;an.prototype.initialize=function(){this.$el=$(this.el);this.$window=$(window);this.template=_.template($("#template_app").html());this.$window.scroll(this.realign);this.$window.resize(this.realign);return this.$window.load((function(ao){return function(){return ao.trigger(an.EVENT_LOADED)}})(this))};an.prototype.start=function(){this.render();return this.show()};an.prototype.render=function(){if(grifo.state.isMobile){$("#draw").remove();$("#paperJs").remove();$("#bgJs").remove()}this.$el.append(this.template({footer1_title:grifo.labelCollection.get("footer1-title").get("label"),footer1_copy:grifo.labelCollection.get("footer1-copy").get("label"),footer2_title:grifo.labelCollection.get("footer2-title").get("label"),footer2_copy:grifo.labelCollection.get("footer2-copy").get("label"),footer3_title:grifo.labelCollection.get("footer3-title").get("label"),footer3_copy:grifo.labelCollection.get("footer3-copy").get("label")}));this.headerView=new O();this.headerView.on(O.EVENT_ARROW_TOP_CLICKED,this.scrollToTop);this.headerBgView=new M();this.tagsPageView=new aj();this.projectsPageView=new G();this.projectPageView=new e();this.streamPageView=new ad();this.aboutPageView=new D();this.realign();return this};an.prototype.show=function(){this.headerView.show();return this.headerBgView.show()};an.prototype.onHashChanged=function(ao,ar,ap){var aq;if(ao===this.currentPage&&ar===this.currentSubPage&&ap===this.currentSubSubPage){return}grifo.state.previousPage=grifo.state.currentPage;grifo.state.previousSubPage=grifo.state.currentSubPage;grifo.state.previousSubSubPage=grifo.state.currentSubSubPage;grifo.state.currentPage=ao;grifo.state.currentSubPage=ar;grifo.state.currentSubSubPage=ap;this.headerView.selectItem(ao);aq=0;switch(ao){case grifo.config.PAGE_PROJECTS:this.aboutPageView.hide();this.streamPageView.hide();grifo.tagCollection.select("");this.tagsPageView.hide();if(ar){this.projectsPageView.hide();this.projectPageView.show();aq=grifo.config.SNAP_Y_HEADER_BG+29}else{this.projectPageView.hide();this.projectsPageView.filter();this.projectsPageView.show()}break;case grifo.config.PAGE_TAGS:this.aboutPageView.hide();this.projectPageView.hide();this.streamPageView.hide();this.projectsPageView.filter(ar);this.projectsPageView.show();grifo.tagCollection.select(ar);this.tagsPageView.show();if(ar){aq=grifo.config.SNAP_Y_HEADER_BG}break;case grifo.config.PAGE_STREAM:this.tagsPageView.hide();this.projectsPageView.hide();this.projectPageView.hide();this.aboutPageView.hide();this.streamPageView.show();break;case grifo.config.PAGE_ABOUT:this.tagsPageView.hide();this.projectsPageView.hide();this.projectPageView.hide();this.streamPageView.hide();this.aboutPageView.show()}return this.scrollToTop(aq)};an.prototype.scrollToTop=function(ao){var ap;if(ao==null){ao=-10}ap=(ao-window.pageYOffset)*2;if(ap<0){ap*=-1}if(ap>1000){ap=1000}return $("html,body").stop().animate({scrollTop:ao},{duration:ap,easing:"easeOutExpo"})};an.prototype.realign=function(){var at,ap,aq,ao,ar;if(!this.headerView||!this.headerBgView){return}ar=ao=ap=-this.$window.scrollTop();if(ar<-grifo.config.SNAP_Y_HEADER_BG){ap=-grifo.config.SNAP_Y_HEADER_BG}if(ar<-grifo.config.SNAP_Y_HEADER){ao=-grifo.config.SNAP_Y_HEADER}this.headerView.setTop(ao);this.headerBgView.setTop(ap);at=ap/-grifo.config.SNAP_Y_HEADER_BG;aq=(ao-ap)/(grifo.config.SNAP_Y_HEADER_BG-grifo.config.SNAP_Y_HEADER);this.headerView.setLeftOpacity(aq);this.headerBgView.setOpacity(at);return this.trigger(an.EVENT_REALIGNED)};return an})(Backbone.View);H=(function(am){s(an,am);function an(){return an.__super__.constructor.apply(this,arguments)}an.prototype.id=null;an.prototype.el=null;an.prototype.$el=null;an.prototype.status=true;an.prototype.hasTransition=true;an.prototype.initialize=function(){if(this.id){this.$el=$("#"+this.id)}else{this.$el=$(this.el)}if(this.hasTransition){this.hide()}return this.init()};an.prototype.remove=function(){return this.$el.remove()};an.prototype.removeChildren=function(){return this.$el.children().remove()};an.prototype.hide=function(){if(!this.hasTransition){return}this.status=false;this.$el.stop();return this.$el.css("display","none")};an.prototype.show=function(ap,ao){if(ap==null){ap=0}if(ao==null){ao=true}if(!this.hasTransition){return}this.status=true;this.$el.css("display","block");if(!ao){return this.$el.css("opacity",1)}else{this.$el.css("opacity",0);return this.$el.stop().delay(ap).animate({opacity:1},{duration:300})}};an.prototype.init=function(){};return an})(Backbone.View);c=(function(an){s(am,an);function am(){this.onClick=m(this.onClick,this);this.remove=m(this.remove,this);this.render=m(this.render,this);return am.__super__.constructor.apply(this,arguments)}am.prototype.useLongTitle=true;am.prototype.tagName="a";am.prototype.hasTransition=false;am.prototype.events={click:"onClick"};am.prototype.init=function(){this.model.bind("change",this.render,this);return this.model.bind("destroy",this.remove,this)};am.prototype.render=function(){var ao;if(this.useLongTitle){ao=this.model.get("long_title")}else{ao=this.model.get("short_title")}if(this.model.get("selected")){$(this.el).removeClass("tag");$(this.el).addClass("tagSelected")}else{$(this.el).addClass("tag");$(this.el).removeClass("tagSelected")}$(this.el).html(ao);$(this.el).attr("href","#");return this};am.prototype.remove=function(){return $(this.el).remove()};am.prototype.onClick=function(ao){ao.preventDefault();if(this.model.get("selected")){return grifo.router.navigateToTag()}else{return grifo.router.navigateToTag(this.model.get("id"))}};return am})(H);M=(function(an){s(am,an);function am(){return am.__super__.constructor.apply(this,arguments)}am.prototype.id="container-header-bg";am.prototype.setTop=function(ao){return this.$el.css("top",ao)};am.prototype.setOpacity=function(ao){return $("#header-bar-bg").css("opacity",ao)};return am})(H);O=(function(an){s(am,an);function am(){this.onArrowTopClick=m(this.onArrowTopClick,this);return am.__super__.constructor.apply(this,arguments)}am.EVENT_ARROW_TOP_CLICKED="EVENT_ARROW_TOP_CLICKED";am.prototype.id="container-header";am.prototype.navView=null;am.prototype.shareView=null;am.prototype.events={"click #arrow-top":"onArrowTopClick"};am.prototype.init=function(){this.navView=new ac();return this.shareView=new aa()};am.prototype.onArrowTopClick=function(ao){ao.preventDefault();return this.trigger(am.EVENT_ARROW_TOP_CLICKED)};am.prototype.selectItem=function(ao){return this.navView.selectItem(ao)};am.prototype.setTop=function(ao){return this.$el.css("top",ao)};am.prototype.setLeftOpacity=function(ao){return $("#header-left").css("opacity",ao)};return am})(H);ac=(function(am){s(an,am);function an(){return an.__super__.constructor.apply(this,arguments)}an.prototype.id="nav";an.prototype.hasTransition=false;an.prototype.selectItem=function(ao){if(ao==null){ao=""}$(".menu",this.$el).removeClass("menuSelected");return $("#menu-"+ao,this.$el).addClass("menuSelected")};return an})(H);aa=(function(an){s(am,an);function am(){this.onClick=m(this.onClick,this);return am.__super__.constructor.apply(this,arguments)}am.prototype.id="header-right";am.prototype.hasTransition=false;am.prototype.init=function(){$("#share-twitter").click(this.onClick);return $("#share-facebook").click(this.onClick)};am.prototype.onClick=function(aq){var ap,ao;aq.preventDefault();ap=$(aq.currentTarget).attr("id");switch(ap){case"share-facebook":ao=grifo.config.SHARE_URL_FACEBOOK.replace("{URL}",encodeURIComponent(grifo.labelCollection.get("share-url").get("label")));break;case"share-twitter":ao=grifo.config.SHARE_URL_TWITTER.replace("{TEXT}",encodeURIComponent(grifo.labelCollection.get("share-tweet").get("label")))}if(ao){return window.open(ao)}};return am})(H);u=(function(an){s(am,an);function am(){return am.__super__.constructor.apply(this,arguments)}return am})(H);D=(function(an){s(am,an);function am(){this.appendBrandView=m(this.appendBrandView,this);this.appendExperienceGroupView=m(this.appendExperienceGroupView,this);this.render=m(this.render,this);return am.__super__.constructor.apply(this,arguments)}am.prototype.id="about-page";am.prototype.overviewTemplate=null;am.prototype.brandsTemplate=null;am.prototype.itemList=null;am.prototype.init=function(){this.itemList=[];this.overviewTemplate=_.template($("#template_overview").html());return this.brandsTemplate=_.template($("#template_brands").html())};am.prototype.render=function(){var ap,at,av,ar,ao,au,aw,aq;this.$el.append(this.overviewTemplate({label:grifo.labelCollection.get("about-overview").get("label"),image:grifo.labelCollection.get("about-picture").get("label"),headline:grifo.labelCollection.get("about-headline").get("label"),copy:grifo.labelCollection.get("about-copy").get("label")}));this.$el.append($("#template_experiences").html());aw=grifo.experienceGroupCollection.models;for(av=0,ao=aw.length;av<ao;av++){at=aw[av];this.appendExperienceGroupView(at)}this.$el.append(this.brandsTemplate({label:grifo.labelCollection.get("about-brands").get("label")}));grifo.brandCollection.sort();aq=grifo.brandCollection.models;for(ar=0,au=aq.length;ar<au;ar++){ap=aq[ar];this.appendBrandView(ap)}return this};am.prototype.appendExperienceGroupView=function(ap){var ao;if(ap.get("column")===0){$("#column-0",this.$el).append($("#template_experience_group_gap").html())}else{$("#column-1",this.$el).append($("#template_experience_group_gap").html())}ao=new z({model:ap});if(ap.get("column")===0){$("#column-0",this.$el).append(ao.render().el)}else{$("#column-1",this.$el).append(ao.render().el)}return this.itemList[this.itemList.length]=ao};am.prototype.appendBrandView=function(ap){var ao;ao=new L({model:ap});$("#brands",this.$el).append(ao.render().el);return this.itemList[this.itemList.length]=ao};am.prototype.show=function(av,ap){var at,aq,ao,au,ar;if(av==null){av=0}if(ap==null){ap=true}this.itemList=[];this.removeChildren();this.render();am.__super__.show.apply(this,arguments).show(av,ap);av+=50;if(this.itemList){au=this.itemList;ar=[];for(aq=0,ao=au.length;aq<ao;aq++){at=au[aq];at.show(av);ar.push(av+=25)}return ar}};am.prototype.hide=function(){this.itemList=[];this.removeChildren();return am.__super__.hide.apply(this,arguments).hide()};return am})(u);L=(function(an){s(am,an);function am(){this.render=m(this.render,this);return am.__super__.constructor.apply(this,arguments)}am.prototype.className="brand";am.prototype.render=function(){if(this.model.get("url").length>0){this.template=_.template($("#template_brand_link").html());$(this.el).append(this.template({image:this.model.get("image"),label:this.model.get("label"),url:this.model.get("url"),window:this.model.get("window")}))}else{this.template=_.template($("#template_brand").html());$(this.el).append(this.template({image:this.model.get("image"),label:this.model.get("label")}))}return this};return am})(H);z=(function(an){s(am,an);function am(){this.appendExperience=m(this.appendExperience,this);this.render=m(this.render,this);return am.__super__.constructor.apply(this,arguments)}am.prototype.className="new-row";am.prototype.numLeftChar=0;am.prototype.init=function(){this.template=_.template($("#template_experience_group").html());this.lineLeftTemplate=_.template($("#template_line_left").html());this.lineRightTemplate=_.template($("#template_line_right").html());this.lineRightPlusTemplate=_.template($("#template_line_right_plus").html());return this.lineGapTemplate=_.template($("#template_line_gap").html())};am.prototype.render=function(){var ar,ap,ao,aq;$(this.el).append(this.template({label:this.model.get("label")}));aq=grifo.experienceCollection.models;for(ap=0,ao=aq.length;ap<ao;ap++){ar=aq[ap];if(ar.get("group")===this.model.get("id")){this.appendExperience(ar)}}$(".inner-left",this.el).append(this.lineGapTemplate());$(".inner-left",this.el).append(this.lineGapTemplate());$(".inner-right",this.el).append(this.lineGapTemplate());$(".inner-right",this.el).append(this.lineGapTemplate());$(".inner-right",this.el).css("max-width",478-29-this.numLeftChar*7);return this};am.prototype.appendExperience=function(ao){if(ao.get("left").split("<")[0].length>this.numLeftChar){this.numLeftChar=ao.get("left").split("<")[0].length}if(ao.get("left").length>0){$(".inner-left",this.el).append(this.lineLeftTemplate({label:ao.get("left")}))}else{$(".inner-left",this.el).append(this.lineGapTemplate())}if(ao.get("right").length>0){if(ao.get("plus_url").length>0){return $(".inner-right",this.el).append(this.lineRightPlusTemplate({label:ao.get("right"),url:ao.get("plus_url"),window:ao.get("window")}))}else{return $(".inner-right",this.el).append(this.lineRightTemplate({label:ao.get("right")}))}}else{return $(".inner-right",this.el).append(this.lineGapTemplate())}};return am})(H);Z=(function(am){s(an,am);function an(){this.appendCreditView=m(this.appendCreditView,this);this.render=m(this.render,this);return an.__super__.constructor.apply(this,arguments)}an.prototype.className="new-row";an.prototype.hasTransition=false;an.prototype.init=function(){return this.template=_.template($("#template_credit_group").html())};an.prototype.render=function(){var ap,aq,ao,ar;$(this.el).append(this.template({label:this.model.get("label")}));ar=grifo.creditCollection.models;for(aq=0,ao=ar.length;aq<ao;aq++){ap=ar[aq];if(ap.get("group")===this.model.get("id")){this.appendCreditView(ap)}}return this};an.prototype.appendCreditView=function(ap){var ao;ao=new a({model:ap});return $($(".date",this.el)[0]).append(ao.render().el)};return an})(H);a=(function(am){s(an,am);function an(){this.appendProfileView=m(this.appendProfileView,this);this.render=m(this.render,this);return an.__super__.constructor.apply(this,arguments)}an.prototype.tagName="p";an.prototype.hasTransition=false;an.prototype.init=function(){return this.template=_.template($("#template_credit").html())};an.prototype.render=function(){var at,ar,ap,ao,av,aq,au;if(this.model.get("label").length>0){$(this.el).append(this.template({label:this.model.get("label")}))}at=0;ap=this.model.get("profiles").length;au=this.model.get("profiles");for(ar=0,ao=au.length;ar<ao;ar++){av=au[ar];aq=grifo.profileCollection.get(av);this.appendProfileView(aq);at++;if(at<ap){$(this.el).append(", ")}}return this};an.prototype.appendProfileView=function(ap){var ao;ao=new q({model:ap});return $(this.el).append(ao.render().el)};return an})(H);q=(function(an){s(am,an);function am(){this.render=m(this.render,this);return am.__super__.constructor.apply(this,arguments)}am.prototype.tagName="a";am.prototype.hasTransition=false;am.prototype.render=function(){$(this.el).html(this.model.get("label"));$(this.el).attr("href",this.model.get("url"));$(this.el).attr("target",this.model.get("window"));return this};return am})(H);e=(function(an){s(am,an);function am(){this.appendProjectImage=m(this.appendProjectImage,this);this.appendCreditGroupView=m(this.appendCreditGroupView,this);this.appendTagView=m(this.appendTagView,this);this.render=m(this.render,this);return am.__super__.constructor.apply(this,arguments)}am.prototype.id="project-page";am.prototype.model=null;am.prototype.template=null;am.prototype.imgTemplate=null;am.prototype.init=function(){this.template=_.template($("#template_page_project").html());return this.imgTemplate=_.template($("#template_project_image").html())};am.prototype.render=function(){var aD,ao,ax,au,aA,ay,av,at,aw,aq,ap,aC,az,ar,aB;this.model=grifo.projectCollection.get(grifo.state.currentSubPage);aq=grifo.projectCollection.at(this.model.get("index")-1);aw=grifo.projectCollection.at(this.model.get("index")+1);if(!aq){aq=grifo.projectCollection.at(grifo.projectCollection.length-1)}if(!aw){aw=grifo.projectCollection.at(0)}this.$el.append(this.template({video:this.model.get("video"),title:this.model.get("long_title"),headline:this.model.get("headline"),url:this.model.get("url"),copy:this.model.get("copy"),showArrows:grifo.state.isDesktop,prevUrl:"#/"+grifo.config.PAGE_PROJECTS+"/"+aq.get("id")+"/",prevTitle:aq.get("long_title"),nextUrl:"#/"+grifo.config.PAGE_PROJECTS+"/"+aw.get("id")+"/",nextTitle:aw.get("long_title")}));ap=this.model.get("tags");for(ax=0,aA=ap.length;ax<aA;ax++){ar=ap[ax];aB=grifo.tagCollection.get(ar);this.appendTagView(aB)}aC=grifo.creditGroupCollection.models;for(au=0,ay=aC.length;au<ay;au++){aD=aC[au];if(aD.get("project")===this.model.get("id")){this.appendCreditGroupView(aD)}}az=this.model.get("images");for(at=0,av=az.length;at<av;at++){ao=az[at];this.appendProjectImage(ao)}return this};am.prototype.appendTagView=function(ap){var ao;ao=new c({model:ap});$("#tags-container",this.$el).append(ao.render().el);return $("#tags-container",this.$el).append(" ")};am.prototype.appendCreditGroupView=function(ap){var ao;ao=new Z({model:ap});return $("#info-right",this.$el).append(ao.render().el)};am.prototype.appendProjectImage=function(ao){return $("#images-container",this.$el).append(this.imgTemplate({image:ao}))};am.prototype.show=function(ap,ao){if(ap==null){ap=100}if(ao==null){ao=true}this.removeChildren();this.render();return am.__super__.show.apply(this,arguments).show(ap,ao)};am.prototype.hide=function(){this.removeChildren();return am.__super__.hide.apply(this,arguments).hide()};return am})(u);G=(function(an){s(am,an);function am(){this.appendThumbnail=m(this.appendThumbnail,this);this.render=m(this.render,this);return am.__super__.constructor.apply(this,arguments)}am.prototype.id="projects-page";am.prototype.itemList=null;am.prototype.init=function(){this.itemList=[];return this.render()};am.prototype.render=function(){var ap,ao,ar,aq;aq=grifo.projectCollection.models;for(ap=0,ao=aq.length;ap<ao;ap++){ar=aq[ap];this.appendThumbnail(ar)}this.$el.isotope({itemSelector:".grid-item",resizable:false,masonry:{columnWidth:1},animationEngine:"jquery",animationOptions:{queue:false,duration:0,easing:"easeOutExpo"}});return this};am.prototype.relayout=function(){return this.$el.isotope("reLayout")};am.prototype.appendThumbnail=function(ap){var ao;ao=new U({model:ap});this.$el.append(ao.render().el);return this.itemList[this.itemList.length]=ao};am.prototype.filter=function(ao){if(ao==null){ao=""}if(ao===""){ao="*"}else{ao="."+ao}if(!this.status){this.$el.isotope({animationOptions:{duration:0}})}else{this.$el.isotope({animationOptions:{duration:750}})}return this.$el.isotope({filter:ao})};am.prototype.show=function(av,ap){var aq,ao,at,ar,aw,au;if(av==null){av=0}if(ap==null){ap=false}if(this.status===true){return}am.__super__.show.apply(this,arguments).show(av,ap);av+=100;this.relayout();if(this.itemList){at=this.itemList;ar=[];for(aq=0,ao=at.length;aq<ao;aq++){au=at[aq];aw=au.show(av);if(aw){ar.push(av+=50)}else{ar.push(void 0)}}return ar}};am.prototype.hide=function(){if(this.status===false){return}this.status=false;return am.__super__.hide.apply(this,arguments).hide()};return am})(u);U=(function(an){s(am,an);function am(){this.onRollOut=m(this.onRollOut,this);this.onRollOver=m(this.onRollOver,this);this.onClick=m(this.onClick,this);this.appendTagView=m(this.appendTagView,this);this.render=m(this.render,this);return am.__super__.constructor.apply(this,arguments)}am.prototype.className="grid-item";am.prototype.template=null;am.prototype.model=null;am.prototype.events={"click .grid-item-image":"onClick","click .grid-item-name":"onClick","click .grid-item-over":"onClick",mouseenter:"onRollOver",mouseleave:"onRollOut"};am.prototype.init=function(){return this.template=_.template($("#template_thumbnail").html())};am.prototype.render=function(){var ap,ao,at,aq,ar;this.$el.addClass(this.model.get("tile_size"));this.$el.addClass(this.model.get("tags").join(" "));this.$el.append(this.template({image:this.model.get("thumbnail"),title:this.model.get("short_title")}));$(".grid-item-image",this.$el).addClass(this.model.get("tile_size"));$(".grid-item-over",this.$el).addClass(this.model.get("tile_size"));$(".grid-item-over",this.$el).css("opacity",0);at=this.model.get("display_tags");for(ap=0,ao=at.length;ap<ao;ap++){aq=at[ap];ar=grifo.tagCollection.get(aq);this.appendTagView(ar)}return this};am.prototype.appendTagView=function(ap){var ao;ao=new c({model:ap});ao.useLongTitle=false;$(".grid-item-tags",this.$el).append(ao.render().el);return $(".grid-item-tags",this.$el).append(" ")};am.prototype.show=function(ap,ao){if(ap==null){ap=0}if(ao==null){ao=true}am.__super__.show.apply(this,arguments).show(ap,ao);return this.$el.attr("class").indexOf("isotope-hidden")===-1};am.prototype.onClick=function(ao){ao.preventDefault();return grifo.router.navigateToProject(this.model.get("id"))};am.prototype.onRollOver=function(ao){$(".grid-item-over",this.$el).stop().animate({opacity:0.2},200);return $(".grid-item-name",this.$el).addClass("over")};am.prototype.onRollOut=function(ao){$(".grid-item-over",this.$el).stop().animate({opacity:0},200);return $(".grid-item-name",this.$el).removeClass("over")};return am})(H);A=(function(am){s(an,am);function an(){this.render=m(this.render,this);return an.__super__.constructor.apply(this,arguments)}an.prototype.className="word-stream-item size1of3";an.prototype.template=null;an.prototype.init=function(){return this.template=_.template($("#template_blog").html())};an.prototype.render=function(){$(this.el).append(this.template({title:this.model.get("title"),description:this.model.get("description"),date:this.model.get("date"),url:this.model.get("url")}));return this};return an})(H);ak=(function(am){s(an,am);function an(){this.render=m(this.render,this);return an.__super__.constructor.apply(this,arguments)}an.prototype.className="media-stream-item size1of3";an.prototype.template=null;an.prototype.init=function(){if(this.model.get("is_portrait")){return this.template=_.template($("#template_flickr_portrait").html())}else{return this.template=_.template($("#template_flickr_landscape").html())}};an.prototype.render=function(){$(this.el).append(this.template({image:this.model.get("image"),date:this.model.get("date"),url:this.model.get("url")}));return this};return an})(H);v=(function(an){s(am,an);function am(){this.render=m(this.render,this);return am.__super__.constructor.apply(this,arguments)}am.prototype.className="word-stream-item size1of3";am.prototype.template=null;am.prototype.init=function(){return this.template=_.template($("#template_github").html())};am.prototype.render=function(){$(this.el).append(this.template({label:this.model.get("text"),date:this.model.get("date"),url:this.model.get("url")}));return this};return am})(H);ad=(function(am){s(an,am);function an(){this.appendFlickrView=m(this.appendFlickrView,this);this.appendYoutubeView=m(this.appendYoutubeView,this);this.appendBlogView=m(this.appendBlogView,this);this.appendGithubView=m(this.appendGithubView,this);this.appendTwitterView=m(this.appendTwitterView,this);this.appendWordLine=m(this.appendWordLine,this);this.render=m(this.render,this);return an.__super__.constructor.apply(this,arguments)}an.prototype.id="stream-page";an.prototype.template=null;an.prototype.wordItemList=null;an.prototype.mediaItemList=null;an.prototype.init=function(){this.wordItemList=[];this.mediaItemList=[];return this.template=_.template($("#template_page_stream").html())};an.prototype.render=function(){var ar,at,aq,ao,ap;this.$el.append(this.template({label:grifo.labelCollection.get("stream-title").get("label")}));aq=0;ao=grifo.twitterCollection.length+grifo.githubCollection.length+grifo.blogCollection.length;at=0;ap=0;while(aq<ao){ar=true;switch(at){case 0:if(ap<grifo.twitterCollection.length){this.appendTwitterView(grifo.twitterCollection.at(ap))}else{ar=false;aq--}break;case 1:if(ap<grifo.githubCollection.length){this.appendGithubView(grifo.githubCollection.at(ap))}else{ar=false;aq--}break;case 2:if(ap<grifo.blogCollection.length){this.appendBlogView(grifo.blogCollection.at(ap))}else{ar=false;aq--}}at++;if(at===3){at=0;ap++}aq++;if(ar&&aq<ao){this.appendWordLine()}}aq=0;ao=grifo.youtubeCollection.length+grifo.flickrCollection.length;at=0;ap=0;while(aq<ao){switch(at){case 0:if(ap<grifo.youtubeCollection.length){this.appendYoutubeView(grifo.youtubeCollection.at(ap))}else{aq--}break;case 1:if(ap<grifo.flickrCollection.length){this.appendFlickrView(grifo.flickrCollection.at(ap))}else{aq--}}at++;if(at===2){at=0;ap++}aq++}$("#media-grid",this.$el).isotope({itemSelector:".media-stream-item",resizable:"false",masonry:{columnWidth:1},animationEngine:"jquery",animationOptions:{queue:false,duration:0,easing:"easeOutExpo"}});return this};an.prototype.appendWordLine=function(){var ao;ao=new F();$("#word-grid",this.$el).append(ao.render().el);return this.wordItemList[this.wordItemList.length]=ao};an.prototype.appendTwitterView=function(ap){var ao;ao=new w({model:ap});$("#word-grid",this.$el).append(ao.render().el);return this.wordItemList[this.wordItemList.length]=ao};an.prototype.appendGithubView=function(ap){var ao;ao=new v({model:ap});$("#word-grid",this.$el).append(ao.render().el);return this.wordItemList[this.wordItemList.length]=ao};an.prototype.appendBlogView=function(ap){var ao;ao=new A({model:ap});$("#word-grid",this.$el).append(ao.render().el);return this.wordItemList[this.wordItemList.length]=ao};an.prototype.appendYoutubeView=function(ap){var ao;ao=new al({model:ap});$("#media-grid",this.$el).append(ao.render().el);return this.mediaItemList[this.mediaItemList.length]=ao};an.prototype.appendFlickrView=function(ap){var ao;ao=new ak({model:ap});$("#media-grid",this.$el).append(ao.render().el);return this.mediaItemList[this.mediaItemList.length]=ao};an.prototype.show=function(aw,ax){var aq,ap,au,ar,az,ao,av,at,ay;if(aw==null){aw=0}if(ax==null){ax=true}this.wordItemList=[];this.mediaItemList=[];this.removeChildren();an.__super__.show.apply(this,arguments).show(aw,ax);this.render();if(this.wordItemList){ao=this.wordItemList;for(aq=0,au=ao.length;aq<au;aq++){ay=ao[aq];ay.show(aw);aw+=25}}aw=0;if(this.mediaItemList){av=this.mediaItemList;at=[];for(ap=0,ar=av.length;ap<ar;ap++){az=av[ap];az.show(aw);at.push(aw+=50)}return at}};an.prototype.hide=function(){this.wordItemList=[];this.mediaItemList=[];this.removeChildren();return an.__super__.hide.apply(this,arguments).hide()};return an})(u);w=(function(an){s(am,an);function am(){this.render=m(this.render,this);return am.__super__.constructor.apply(this,arguments)}am.prototype.className="word-stream-item size1of3";am.prototype.template=null;am.prototype.init=function(){return this.template=_.template($("#template_twitter").html())};am.prototype.render=function(){$(this.el).append(this.template({label:this.model.get("text"),date:this.model.get("date"),url:this.model.get("url")}));return this};return am})(H);F=(function(an){s(am,an);function am(){this.render=m(this.render,this);return am.__super__.constructor.apply(this,arguments)}am.prototype.className="word-stream-line size1of3 selectable";am.prototype.render=function(){return this};return am})(H);al=(function(an){s(am,an);function am(){this.render=m(this.render,this);return am.__super__.constructor.apply(this,arguments)}am.prototype.className="media-stream-item size1of3";am.prototype.template=null;am.prototype.init=function(){if(this.model.get("is_portrait")){return this.template=_.template($("#template_youtube_portrait").html())}else{return this.template=_.template($("#template_youtube_landscape").html())}};am.prototype.render=function(){$(this.el).append(this.template({id:this.model.get("id"),image:this.model.get("thumbnail_medium"),date:this.model.get("date"),url:this.model.get("url")}));return this};return am})(H);k=(function(an){s(am,an);function am(){this.appendTagView=m(this.appendTagView,this);this.render=m(this.render,this);return am.__super__.constructor.apply(this,arguments)}am.prototype.className="size1of6";am.prototype.template=null;am.prototype.model=null;am.prototype.init=function(){return this.template=_.template($("#template_tag_group").html())};am.prototype.render=function(){var ap,ao,ar,aq;this.$el.append(this.template({group:this.model.get("label")}));ar=grifo.tagCollection.models;for(ap=0,ao=ar.length;ap<ao;ap++){aq=ar[ap];if(aq.get("group")===this.model.get("id")){this.appendTagView(aq)}}return this};am.prototype.appendTagView=function(ap){var ao;ao=new c({model:ap});ao.useLongTitle=true;this.$el.append(ao.render().el);return this.$el.append(" ")};return am})(H);aj=(function(an){s(am,an);function am(){this.appendTagGroup=m(this.appendTagGroup,this);this.render=m(this.render,this);return am.__super__.constructor.apply(this,arguments)}am.prototype.id="tags-page";am.prototype.itemList=null;am.prototype.init=function(){this.itemList=[];return this.render()};am.prototype.render=function(){var ap,ao,aq,ar;aq=grifo.tagGroupCollection.models;for(ap=0,ao=aq.length;ap<ao;ap++){ar=aq[ap];this.appendTagGroup(ar)}this.$el.append('<div class="new-row"><br/><hr/></div>');return this};am.prototype.appendTagGroup=function(ap){var ao;ao=new k({model:ap});this.$el.append(ao.render().el);return this.itemList[this.itemList.length]=ao};am.prototype.show=function(av,ap){var ar,ao,au,at,aq;if(av==null){av=0}if(ap==null){ap=true}if(this.status===true){return}am.__super__.show.apply(this,arguments).show(av,ap);if(this.itemList){au=this.itemList;at=[];for(ar=0,ao=au.length;ar<ao;ar++){aq=au[ar];aq.show(av);at.push(av+=50)}return at}};return am})(u)}).call(this);